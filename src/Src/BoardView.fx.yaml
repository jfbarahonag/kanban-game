"BoardView As screen.'phoneLayout_FluidGridWithHeaderPageLayout_ver3.0'":
    OnVisible: |-
        =// popup
        UpdateContext(
            {
                popUpEnable: false, 
                popUpTitle: "", 
                popUpMessage: ""
            }
        );
        
        // popupPlanning
        UpdateContext(
            {
                popUpPlanningEnable: false
            }
        );
        
        // popupDaily
        UpdateContext(
            {
                popUpDailyEnable: false,
                popUpDailyToDo2InProcessEnable: false
            }
        );
        
        // token
        UpdateContext(
            {
                tokenX: 80,
                tokenY: 40
            }
        );
        
        // game
        UpdateContext(
            {
                currentCard: First(Shuffle(DailyNormalCards)),
                currentRound: 1,
                currentTurn: 1,
                maxTurn: totalPlayers
            }
        );
        
        // kanban board
        UpdateContext(
            {
                // team 1
                team1TaskAX: 142,
                team1TaskAY: 114 + 131*0,
                team1TaskBX: 249,
                team1TaskBY: 114 + 131*0,
                team1TaskCX: 142,
                team1TaskCY: 114 + 131*0 + 61,
                team1TaskDX: 249,
                team1TaskDY: 114 + 131*0 + 61,
                // team 2
                team2TaskAX: 142,
                team2TaskAY: 114 + 131*1,
                team2TaskBX: 249,
                team2TaskBY: 114 + 131*1,
                team2TaskCX: 142,
                team2TaskCY: 114 + 131*1 + 61,
                team2TaskDX: 249,
                team2TaskDY: 114 + 131*1 + 61,
                // team 3
                team3TaskAX: 142,
                team3TaskAY: 114 + 131*2,
                team3TaskBX: 249,
                team3TaskBY: 114 + 131*2,
                team3TaskCX: 142,
                team3TaskCY: 114 + 131*2 + 61,
                team3TaskDX: 249,
                team3TaskDY: 114 + 131*2 + 61,
                // team 4
                team4TaskAX: 142,
                team4TaskAY: 114 + 131*3,
                team4TaskBX: 249,
                team4TaskBY: 114 + 131*3,
                team4TaskCX: 142,
                team4TaskCY: 114 + 131*3 + 61,
                team4TaskDX: 249,
                team4TaskDY: 114 + 131*3 + 61,
                // team 5
                team5TaskAX: 142,
                team5TaskAY: 114 + 131*4,
                team5TaskBX: 249,
                team5TaskBY: 114 + 131*4,
                team5TaskCX: 142,
                team5TaskCY: 114 + 131*4 + 61,
                team5TaskDX: 249,
                team5TaskDY: 114 + 131*4 + 61,
                // team 6
                team6TaskAX: 142,
                team6TaskAY: 114 + 131*5,
                team6TaskBX: 249,
                team6TaskBY: 114 + 131*5,
                team6TaskCX: 142,
                team6TaskCY: 114 + 131*5 + 61,
                team6TaskDX: 249,
                team6TaskDY: 114 + 131*5 + 61
            }
        );

    RestartButton As button:
        OnSelect: =Navigate(WelcomeView,ScreenTransition.Fade);
        Text: ="RESTART"
        X: =1180
        Y: =24
        ZIndex: =4

    Header As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =4

        RectQuickActionBar2 As rectangle:
            Height: =88
            Width: =Parent.Width
            ZIndex: =2

        LblAppName2 As label:
            Align: =Align.Center
            Height: =88
            Text: ="Board Game"
            Width: =Parent.Width
            ZIndex: =3

    Canvas2 As fluidGrid.fluidGridWithBlankCard:
        BorderThickness: =0
        Height: =680
        Width: =Parent.Width
        Y: =RectQuickActionBar2.Y + RectQuickActionBar2.Height
        ZIndex: =6

        PLAYBOARD As dataCard:
            BorderColor: =RGBA(0, 0, 0, 1)
            BorderStyle: =BorderStyle.Solid
            BorderThickness: =0
            DisplayMode: =DisplayMode.Edit
            Fill: =RGBA(0, 0, 0, 0)
            Height: =392
            Width: =Parent.Width
            X: =0
            Y: =0
            ZIndex: =1

            RetrospectiveArea As rectangle:
                BorderColor: =RGBA(255, 255, 255, 1)
                BorderThickness: =2
                Fill: =RGBA(54, 176, 75, 1)
                Height: =48
                X: =80
                Y: =128
                ZIndex: =2

            RetrospectiveText As label:
                Align: =Align.Center
                Color: =RGBA(255, 255, 255, 1)
                FontWeight: =FontWeight.Bold
                Height: =48
                Text: ="RETROSPECTIVE"
                X: =80
                Y: =128
                ZIndex: =3

            PlanningText As rectangle:
                Fill: =RGBA(203, 102, 102, 1)
                Height: =48
                X: =80
                Y: =80
                ZIndex: =4

            PlanningArea As label:
                Align: =Align.Center
                BorderColor: =RGBA(255, 255, 255, 1)
                BorderThickness: =2
                Color: =RGBA(255, 255, 255, 1)
                FontWeight: =FontWeight.Bold
                Height: =48
                Text: ="PLANNING"
                X: =80
                Y: =80
                ZIndex: =5

            Daily1Area As rectangle:
                BorderColor: =RGBA(255, 255, 255, 1)
                BorderThickness: =2
                Fill: =RGBA(0, 134, 208, 1)
                Height: =48
                X: =230
                Y: =80
                ZIndex: =6

            Daily1Text As label:
                Align: =Align.Center
                Color: =RGBA(255, 255, 255, 1)
                FontWeight: =FontWeight.Bold
                Height: =48
                Text: ="DAILY"
                X: =230
                Y: =80
                ZIndex: =7

            Daily2Area As rectangle:
                BorderColor: =RGBA(255, 255, 255, 1)
                BorderThickness: =2
                Fill: =RGBA(0, 134, 208, 1)
                Height: =48
                X: =380
                Y: =80
                ZIndex: =8

            Daily2Text As label:
                Align: =Align.Center
                Color: =RGBA(255, 255, 255, 1)
                FontWeight: =FontWeight.Bold
                Height: =48
                Text: ="DAILY"
                X: =380
                Y: =80
                ZIndex: =9

            Daily3Area As rectangle:
                BorderColor: =RGBA(255, 255, 255, 1)
                BorderThickness: =2
                Fill: =RGBA(0, 134, 208, 1)
                Height: =48
                X: =530
                Y: =80
                ZIndex: =10

            Daily3Text As label:
                Align: =Align.Center
                Color: =RGBA(255, 255, 255, 1)
                FontWeight: =FontWeight.Bold
                Height: =48
                Text: ="DAILY"
                X: =530
                Y: =80
                ZIndex: =11

            Daily4Area As rectangle:
                BorderColor: =RGBA(255, 255, 255, 1)
                BorderThickness: =2
                Fill: =RGBA(0, 134, 208, 1)
                Height: =48
                X: =530
                Y: =128
                ZIndex: =12

            Daily4Text As label:
                Align: =Align.Center
                Color: =RGBA(255, 255, 255, 1)
                FontWeight: =FontWeight.Bold
                Height: =48
                Text: ="DAILY"
                X: =530
                Y: =128
                ZIndex: =13

            Daily5Text As rectangle:
                BorderColor: =RGBA(255, 255, 255, 1)
                BorderThickness: =2
                Fill: =RGBA(0, 134, 208, 1)
                Height: =48
                X: =530
                Y: =176
                ZIndex: =14

            Daily5Area As label:
                Align: =Align.Center
                Color: =RGBA(255, 255, 255, 1)
                FontWeight: =FontWeight.Bold
                Height: =48
                Text: ="DAILY"
                X: =530
                Y: =176
                ZIndex: =15

            Daily6Area As rectangle:
                BorderColor: =RGBA(255, 255, 255, 1)
                BorderThickness: =2
                Fill: =RGBA(0, 134, 208, 1)
                Height: =48
                X: =530
                Y: =224
                ZIndex: =16

            Daily6Text As label:
                Align: =Align.Center
                Color: =RGBA(255, 255, 255, 1)
                FontWeight: =FontWeight.Bold
                Height: =48
                Text: ="DAILY"
                X: =530
                Y: =224
                ZIndex: =17

            Daily7Area As rectangle:
                BorderColor: =RGBA(255, 255, 255, 1)
                BorderThickness: =2
                Fill: =RGBA(0, 134, 208, 1)
                Height: =48
                X: =380
                Y: =224
                ZIndex: =18

            Daily7Text As label:
                Align: =Align.Center
                Color: =RGBA(255, 255, 255, 1)
                FontWeight: =FontWeight.Bold
                Height: =48
                Text: ="DAILY"
                X: =380
                Y: =224
                ZIndex: =19

            RefinementArea As rectangle:
                BorderColor: =RGBA(255, 255, 255, 1)
                BorderThickness: =2
                Fill: =RGBA(201, 151, 0, 1)
                Height: =48
                X: =230
                Y: =224
                ZIndex: =20

            RefinementText As label:
                Align: =Align.Center
                Color: =RGBA(255, 255, 255, 1)
                FontWeight: =FontWeight.Bold
                Height: =48
                Text: ="REFINEMENT"
                X: =230
                Y: =224
                ZIndex: =21

            Daily8Area As rectangle:
                BorderColor: =RGBA(255, 255, 255, 1)
                BorderThickness: =2
                Fill: =RGBA(0, 134, 208, 1)
                Height: =48
                X: =80
                Y: =224
                ZIndex: =22

            Daily8Text As label:
                Align: =Align.Center
                Color: =RGBA(255, 255, 255, 1)
                FontWeight: =FontWeight.Bold
                Height: =48
                Text: ="DAILY"
                X: =80
                Y: =224
                ZIndex: =23

            ReviewArea As rectangle:
                BorderColor: =RGBA(255, 255, 255, 1)
                BorderThickness: =2
                Fill: =RGBA(255, 157, 0, 1)
                Height: =48
                X: =80
                Y: =176
                ZIndex: =24

            ReviewText As label:
                Align: =Align.Center
                Color: =RGBA(255, 255, 255, 1)
                FontWeight: =FontWeight.Bold
                Height: =48
                Text: ="REVIEW"
                X: =80
                Y: =176
                ZIndex: =25

            TokenIcon As icon.Person:
                Color: =RGBA(0, 0, 0, 1)
                Height: =40
                Icon: =Icon.Person
                Width: =30
                X: =tokenX
                Y: =tokenY
                ZIndex: =26

            DailyCardGroup As group:
                Height: =5
                Width: =5
                X: =60
                Y: =60
                ZIndex: =29

                Rectangle7 As rectangle:
                    Fill: =RGBA(0, 134, 208, 1)
                    Height: =192
                    X: =788
                    Y: =80
                    ZIndex: =27

                Label9 As label:
                    Align: =Align.Center
                    Color: =RGBA(255, 255, 255, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =124
                    Text: |-
                        ="DAILY
                        IN PROCESS
                        CARD"
                    X: =788
                    Y: =112
                    ZIndex: =28

            RefinementCardGroup As group:
                Height: =5
                Width: =5
                X: =-728
                Y: =-20
                ZIndex: =31

                Rectangle7_1 As rectangle:
                    Fill: =RGBA(201, 151, 0, 1)
                    Height: =192
                    X: =973
                    Y: =80
                    ZIndex: =29

                Label9_1 As label:
                    Align: =Align.Center
                    Color: =RGBA(255, 255, 255, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =124
                    Text: |-
                        ="REFINEMENT
                        CARD"
                    X: =973
                    Y: =112
                    ZIndex: =30

            Divider As rectangle:
                Height: =1
                Width: =1314
                X: =20
                Y: =391
                ZIndex: =33

            DailyCardGroup_1 As group:
                Height: =5
                Width: =5
                X: =-728
                Y: =-20
                ZIndex: =33

                Rectangle7_2 As rectangle:
                    Fill: =RGBA(99, 139, 44, 1)
                    Height: =192
                    X: =1159
                    Y: =80
                    ZIndex: =31

                Label9_2 As label:
                    Align: =Align.Center
                    Color: =RGBA(255, 255, 255, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =124
                    Text: |-
                        ="DAILY
                        REVISION
                        CARD"
                    X: =1159
                    Y: =112
                    ZIndex: =32

            RoundButton As button:
                DisplayMode: |-
                    =If(
                        roundStatus = GameStatusType.NOT_STARTED,
                        DisplayMode.Edit,
                        DisplayMode.Disabled
                    )
                Fill: =RGBA(118, 0, 0, 1)
                OnSelect: |-
                    =If(
                        // ---------- Start game logic
                        gameStatus = GameStatusType.NOT_STARTED,
                        UpdateContext(
                            {
                                gameStatus: GameStatusType.STARTED,
                                popUpEnable: true, 
                                popUpTitle: "The game has just begun", 
                                popUpMessage: "Please click on Start Round Button" 
                            }
                        ),
                        // ---------- Start round logic
                        // -------- Move token
                        // If game not started
                        If(
                            And(tokenX = 80, tokenY = 40),
                            UpdateContext(
                                {
                                    tokenX:tokenX + 120,
                                    tokenY:tokenY + 44
                                }
                            ),
                            // If token is moving up
                            If(
                                And(tokenX = 200, tokenY >= 132),
                                UpdateContext({
                                    tokenY: tokenY - 48
                                }),
                                // If token is moving left
                                If(
                                    And(tokenX <= 650, tokenY >= 228),
                                    UpdateContext({
                                        tokenX: tokenX - 150
                                    }),
                                    // If token is moving down
                                    If(
                                        And(tokenX = 650, tokenY >= 84),
                                        UpdateContext({
                                            tokenY: tokenY + 48
                                        }),
                                        // If token is moving right
                                        If(
                                            tokenY = 84,
                                            UpdateContext({
                                                tokenX: tokenX + 150
                                            })
                                        )
                                    )
                                )
                            )
                        );
                        // -------- Enable turns
                        UpdateContext({
                            roundStatus:GameStatusType.STARTED,
                            turnStatus: GameStatusType.NOT_STARTED
                        });
                        // -------- Validate round type
                        If(
                            // IS PLANNING
                            Index(Rounds, currentRound).type = RoundType.PLANNING,
                            UpdateContext({
                                popUpEnable: true,
                                popUpTitle: Index(Rounds, currentRound).name,
                                popUpMessage: "Please move the tasks to handle in this Sprint during your turn"
                            })
                        );
                    
                        If(
                            // IS DAILY AND NOT ALL TEAMS HAS TASKS IN PROCESS AND HAS 
                            And(
                                Index(Rounds, currentRound).type = RoundType.DAILY,
                                CountRows(
                                    GroupBy(
                                        Filter(Tasks, stage = TaskStageType.IN_PROCESS),"team","data"
                                    )
                                ) < totalPlayers,
                                CountRows(
                                    GroupBy(
                                        Filter(Tasks, stage = TaskStageType.TODO),"team","data"
                                    )
                                ) > 0
                            ),
                            UpdateContext({
                                //popUpDailyEnable: true
                                popUpDailyToDo2InProcessEnable: true
                            })
                        );
                    )
                Text: |-
                    =If(
                        gameStatus = GameStatusType.NOT_STARTED,
                        "Start Game",
                        "Start Round"
                    )
                X: =110
                Y: =311
                ZIndex: =34

            TurnButton As button:
                DisplayMode: |-
                    =If(
                        And(roundStatus = GameStatusType.STARTED, turnStatus = GameStatusType.NOT_STARTED),
                        DisplayMode.Edit,
                        DisplayMode.Disabled
                    )
                Fill: =RGBA(18, 166, 166, 1)
                OnSelect: |+
                    =// Update status
                    UpdateContext({
                        turnStatus: GameStatusType.STARTED
                    });
                    
                    // Validate planning case
                    If(
                        Index(Rounds, currentRound).type = RoundType.PLANNING,
                        UpdateContext({
                            popUpPlanningEnable:true
                        })
                    );
                    
                    // Validate daily case
                    If(
                        Index(Rounds, currentRound).type = RoundType.DAILY,
                        UpdateContext({
                            popUpDailyEnable:true
                        })
                    );
                    
                Text: ="Start Turn"
                X: =295
                Y: =311
                ZIndex: =35

            FinishTurnButton As button:
                DisplayMode: |-
                    =If(
                        And(roundStatus = GameStatusType.STARTED, turnStatus = GameStatusType.STARTED),
                        DisplayMode.Edit,
                        DisplayMode.Disabled
                    )
                Fill: =RGBA(18, 166, 166, 1)
                OnSelect: |-
                    =If(
                        // Round is over
                        currentTurn = maxTurn,
                        UpdateContext({
                            currentTurn: 1,
                            currentRound: currentRound + 1,
                            roundStatus: GameStatusType.NOT_STARTED,
                            turnStatus: GameStatusType.NOT_STARTED
                        }),
                        // Round continues
                        UpdateContext({
                            currentTurn: currentTurn + 1,
                            turnStatus: GameStatusType.NOT_STARTED
                        })
                    )
                Text: ="Finish Turn"
                Width: =154
                X: =489
                Y: =311
                ZIndex: =36

        KANBANBOARD As dataCard.blankCard:
            BorderColor: =RGBA(0, 0, 0, 1)
            BorderStyle: =BorderStyle.Solid
            DisplayMode: =DisplayMode.Edit
            Fill: =RGBA(0, 0, 0, 0)
            Height: =TeamsTasksGroup.Height + 150
            Width: =1366
            X: =0
            Y: =1
            ZIndex: =2

            BacklogText As label:
                Align: =Align.Center
                Fill: =RGBA(153, 207, 236, 1)
                Height: =85
                Size: =25
                Text: ="Backlog"
                Width: =220
                X: =132
                Y: =16
                ZIndex: =6

            ToDoText As label:
                Align: =Align.Center
                Fill: =RGBA(209, 232, 178, 1)
                Height: =85
                Size: =25
                Text: ="To Do"
                Width: =220
                X: =352
                Y: =16
                ZIndex: =7

            InProcessText As label:
                Align: =Align.Center
                Fill: =RGBA(251, 188, 159, 1)
                Height: =85
                Size: =25
                Text: ="In Process"
                Width: =220
                X: =572
                Y: =16
                ZIndex: =8

            RevisionText As label:
                Align: =Align.Center
                Fill: =RGBA(250, 247, 157, 1)
                Height: =85
                Size: =25
                Text: ="Review"
                Width: =220
                X: =792
                Y: =16
                ZIndex: =9

            CompletedText As label:
                Align: =Align.Center
                Fill: =RGBA(153, 160, 196, 1)
                Height: =85
                Size: =25
                Text: ="Completed"
                Width: =220
                X: =1012
                Y: =16
                ZIndex: =10

            Team1Name As label:
                Align: =Align.Center
                Height: =117
                Text: =Index(GamePlayers, 1).name
                Width: =117
                Y: =114
                ZIndex: =107

            Team2Name As label:
                Align: =Align.Center
                Height: =117
                Text: =Index(GamePlayers, 2).name
                Width: =117
                Y: =245
                ZIndex: =108

            Team3Name As label:
                Align: =Align.Center
                Height: =117
                Text: |-
                    =If(
                        totalPlayers >= 3,
                        Index(GamePlayers, 3).name,
                        ""
                    )
                Visible: =totalPlayers >= 3
                Width: =117
                X: =6
                Y: =373
                ZIndex: =109

            Team4Name As label:
                Align: =Align.Center
                Height: =117
                Text: |-
                    =If(
                        totalPlayers >= 4,
                        Index(GamePlayers, 4).name,
                        ""
                    )
                Visible: =totalPlayers >= 4
                Width: =117
                X: =6
                Y: =507
                ZIndex: =110

            Team5Name As label:
                Align: =Align.Center
                Height: =117
                Text: |-
                    =If(
                        totalPlayers >= 5,
                        Index(GamePlayers, 5).name,
                        ""
                    )
                Visible: =totalPlayers >= 5
                Width: =117
                X: =6
                Y: =643
                ZIndex: =111

            Team6Name As label:
                Align: =Align.Center
                Height: =117
                Text: |-
                    =If(
                        totalPlayers >= 6,
                        Index(GamePlayers, 6).name,
                        ""
                    )
                Visible: =totalPlayers >= 6
                Width: =117
                X: =6
                Y: =779
                ZIndex: =112

            "TeamsTasksGroup As gallery.'BrowseLayout_Vertical_TwoTextOneImageVariant_ver5.0'":
                DelayItemLoading: =true
                Height: =856
                Items: =Players
                Layout: =Layout.Vertical
                LoadingSpinner: =LoadingSpinner.Data
                TemplatePadding: =0
                TemplateSize: =142
                Width: =1101
                X: =131
                Y: =101
                ZIndex: =113

                HDivider As rectangle:
                    Fill: =RGBA(0, 18, 107, 1)
                    Height: =4
                    OnSelect: =Select(Parent)
                    Width: =Parent.TemplateWidth
                    Y: =Parent.TemplateHeight - Self.Height
                    ZIndex: =5

                VDivider1 As rectangle:
                    Height: =Parent.TemplateHeight - HDivider.Height
                    OnSelect: =Select(Parent)
                    Width: =4
                    ZIndex: =6

                TeamTkAArea As rectangle:
                    Height: =56
                    Width: =92
                    X: |-
                        =18
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task A"
                            ).stage = TaskStageType.TODO,
                            219 * TaskStageType.TODO,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task A"
                            ).stage = TaskStageType.IN_PROCESS,
                            219 * TaskStageType.IN_PROCESS,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task A"
                            ).stage = TaskStageType.REVIEW,
                            219 * TaskStageType.REVIEW,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task A"
                            ).stage = TaskStageType.COMPLETED,
                            219 * TaskStageType.COMPLETED,
                            0
                        )
                    Y: =8
                    ZIndex: =7

                TeamTkACounter As label:
                    Align: =Align.Center
                    BorderThickness: =1
                    Color: =RGBA(255, 255, 255, 1)
                    Fill: =RGBA(136, 160, 209, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =22
                    Text: |-
                        =LookUp(
                            Filter(Tasks, team = ThisItem.id),
                            name = "Task A"
                        ).counter
                    Width: =46
                    X: |-
                        =18
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task A"
                            ).stage = TaskStageType.TODO,
                            219 * TaskStageType.TODO,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task A"
                            ).stage = TaskStageType.IN_PROCESS,
                            219 * TaskStageType.IN_PROCESS,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task A"
                            ).stage = TaskStageType.REVIEW,
                            219 * TaskStageType.REVIEW,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task A"
                            ).stage = TaskStageType.COMPLETED,
                            219 * TaskStageType.COMPLETED,
                            0
                        )
                    Y: =8
                    ZIndex: =8

                TeamTkASP As label:
                    Align: =Align.Center
                    BorderThickness: =1
                    Color: =RGBA(255, 255, 255, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =22
                    Text: |-
                        =LookUp(
                            Filter(Tasks, team = ThisItem.id),
                            name = "Task A"
                        ).SP
                    Width: =46
                    X: |-
                        =64
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task A"
                            ).stage = TaskStageType.TODO,
                            219 * TaskStageType.TODO,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task A"
                            ).stage = TaskStageType.IN_PROCESS,
                            219 * TaskStageType.IN_PROCESS,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task A"
                            ).stage = TaskStageType.REVIEW,
                            219 * TaskStageType.REVIEW,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task A"
                            ).stage = TaskStageType.COMPLETED,
                            219 * TaskStageType.COMPLETED,
                            0
                        )
                    Y: =8
                    ZIndex: =9

                TeamTkADescription As label:
                    Align: =Align.Center
                    BorderThickness: =1
                    Color: =RGBA(255, 255, 255, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =34
                    Text: |-
                        =LookUp(
                            Filter(Tasks, team = ThisItem.id),
                            name = "Task A"
                        ).name
                    Width: =92
                    X: |-
                        =18
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task A"
                            ).stage = TaskStageType.TODO,
                            219 * TaskStageType.TODO,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task A"
                            ).stage = TaskStageType.IN_PROCESS,
                            219 * TaskStageType.IN_PROCESS,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task A"
                            ).stage = TaskStageType.REVIEW,
                            219 * TaskStageType.REVIEW,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task A"
                            ).stage = TaskStageType.COMPLETED,
                            219 * TaskStageType.COMPLETED,
                            0
                        )
                    Y: =30
                    ZIndex: =10

                TeamTkBArea As rectangle:
                    Height: =56
                    Width: =92
                    X: |-
                        =115
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task B"
                            ).stage = TaskStageType.TODO,
                            219 * TaskStageType.TODO,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task B"
                            ).stage = TaskStageType.IN_PROCESS,
                            219 * TaskStageType.IN_PROCESS,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task B"
                            ).stage = TaskStageType.REVIEW,
                            219 * TaskStageType.REVIEW,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task B"
                            ).stage = TaskStageType.COMPLETED,
                            219 * TaskStageType.COMPLETED,
                            0
                        )
                    Y: =8
                    ZIndex: =11

                TeamTkBCounter As label:
                    Align: =Align.Center
                    BorderThickness: =1
                    Color: =RGBA(255, 255, 255, 1)
                    Fill: =RGBA(136, 160, 209, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =22
                    Text: |-
                        =LookUp(
                           Filter(Tasks, team = ThisItem.id),
                            name = "Task B"
                        ).counter
                    Width: =46
                    X: |-
                        =115
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task B"
                            ).stage = TaskStageType.TODO,
                            219 * TaskStageType.TODO,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task B"
                            ).stage = TaskStageType.IN_PROCESS,
                            219 * TaskStageType.IN_PROCESS,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task B"
                            ).stage = TaskStageType.REVIEW,
                            219 * TaskStageType.REVIEW,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task B"
                            ).stage = TaskStageType.COMPLETED,
                            219 * TaskStageType.COMPLETED,
                            0
                        )
                    Y: =8
                    ZIndex: =12

                TeamTkBSP As label:
                    Align: =Align.Center
                    BorderThickness: =1
                    Color: =RGBA(255, 255, 255, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =22
                    Text: |-
                        =LookUp(
                            Filter(Tasks, team = ThisItem.id),
                            name = "Task B"
                        ).SP
                    Width: =46
                    X: |-
                        =161
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task B"
                            ).stage = TaskStageType.TODO,
                            219 * TaskStageType.TODO,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task B"
                            ).stage = TaskStageType.IN_PROCESS,
                            219 * TaskStageType.IN_PROCESS,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task B"
                            ).stage = TaskStageType.REVIEW,
                            219 * TaskStageType.REVIEW,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task B"
                            ).stage = TaskStageType.COMPLETED,
                            219 * TaskStageType.COMPLETED,
                            0
                        )
                    Y: =8
                    ZIndex: =13

                TeamTkBDescription As label:
                    Align: =Align.Center
                    BorderThickness: =1
                    Color: =RGBA(255, 255, 255, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =34
                    Text: |-
                        =LookUp(
                            Filter(Tasks, team = ThisItem.id),
                            name = "Task B"
                        ).name
                    Width: =92
                    X: |-
                        =115
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task B"
                            ).stage = TaskStageType.TODO,
                            219 * TaskStageType.TODO,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task B"
                            ).stage = TaskStageType.IN_PROCESS,
                            219 * TaskStageType.IN_PROCESS,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task B"
                            ).stage = TaskStageType.REVIEW,
                            219 * TaskStageType.REVIEW,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task B"
                            ).stage = TaskStageType.COMPLETED,
                            219 * TaskStageType.COMPLETED,
                            0
                        )
                    Y: =30
                    ZIndex: =14

                TeamTkCArea As rectangle:
                    Height: =56
                    Width: =92
                    X: |-
                        =18
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task C"
                            ).stage = TaskStageType.TODO,
                            219 * TaskStageType.TODO,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task C"
                            ).stage = TaskStageType.IN_PROCESS,
                            219 * TaskStageType.IN_PROCESS,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task C"
                            ).stage = TaskStageType.REVIEW,
                            219 * TaskStageType.REVIEW,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task C"
                            ).stage = TaskStageType.COMPLETED,
                            219 * TaskStageType.COMPLETED,
                            0
                        )
                    Y: =70
                    ZIndex: =15

                TeamTkCCounter As label:
                    Align: =Align.Center
                    BorderThickness: =1
                    Color: =RGBA(255, 255, 255, 1)
                    Fill: =RGBA(136, 160, 209, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =22
                    Text: |-
                        =LookUp(
                            Filter(Tasks, team = ThisItem.id),
                            name = "Task C"
                        ).counter
                    Width: =46
                    X: |-
                        =18
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task C"
                            ).stage = TaskStageType.TODO,
                            219 * TaskStageType.TODO,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task C"
                            ).stage = TaskStageType.IN_PROCESS,
                            219 * TaskStageType.IN_PROCESS,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task C"
                            ).stage = TaskStageType.REVIEW,
                            219 * TaskStageType.REVIEW,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task C"
                            ).stage = TaskStageType.COMPLETED,
                            219 * TaskStageType.COMPLETED,
                            0
                        )
                    Y: =70
                    ZIndex: =16

                TeamTkCSP As label:
                    Align: =Align.Center
                    BorderThickness: =1
                    Color: =RGBA(255, 255, 255, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =22
                    Text: |-
                        =LookUp(
                            Filter(Tasks, team = ThisItem.id),
                            name = "Task C"
                        ).SP
                    Width: =46
                    X: |-
                        =64
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task C"
                            ).stage = TaskStageType.TODO,
                            219 * TaskStageType.TODO,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task C"
                            ).stage = TaskStageType.IN_PROCESS,
                            219 * TaskStageType.IN_PROCESS,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task C"
                            ).stage = TaskStageType.REVIEW,
                            219 * TaskStageType.REVIEW,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task C"
                            ).stage = TaskStageType.COMPLETED,
                            219 * TaskStageType.COMPLETED,
                            0
                        )
                    Y: =70
                    ZIndex: =17

                TeamTkCDescription As label:
                    Align: =Align.Center
                    BorderThickness: =1
                    Color: =RGBA(255, 255, 255, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =34
                    Text: |-
                        =LookUp(
                            Filter(Tasks, team = ThisItem.id),
                            name = "Task C"
                        ).name
                    Width: =92
                    X: |-
                        =18
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task C"
                            ).stage = TaskStageType.TODO,
                            219 * TaskStageType.TODO,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task C"
                            ).stage = TaskStageType.IN_PROCESS,
                            219 * TaskStageType.IN_PROCESS,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task C"
                            ).stage = TaskStageType.REVIEW,
                            219 * TaskStageType.REVIEW,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task C"
                            ).stage = TaskStageType.COMPLETED,
                            219 * TaskStageType.COMPLETED,
                            0
                        )
                    Y: =92
                    ZIndex: =18

                TeamTkDArea As rectangle:
                    Height: =56
                    Width: =92
                    X: |-
                        =115
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task D"
                            ).stage = TaskStageType.TODO,
                            219 * TaskStageType.TODO,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task D"
                            ).stage = TaskStageType.IN_PROCESS,
                            219 * TaskStageType.IN_PROCESS,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task D"
                            ).stage = TaskStageType.REVIEW,
                            219 * TaskStageType.REVIEW,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task D"
                            ).stage = TaskStageType.COMPLETED,
                            219 * TaskStageType.COMPLETED,
                            0
                        )
                    Y: =70
                    ZIndex: =19

                TeamTkDCounter As label:
                    Align: =Align.Center
                    BorderThickness: =1
                    Color: =RGBA(255, 255, 255, 1)
                    Fill: =RGBA(136, 160, 209, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =22
                    Text: |-
                        =LookUp(
                            Filter(Tasks, team = ThisItem.id),
                            name = "Task D"
                        ).counter
                    Width: =46
                    X: |-
                        =115
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task D"
                            ).stage = TaskStageType.TODO,
                            219 * TaskStageType.TODO,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task D"
                            ).stage = TaskStageType.IN_PROCESS,
                            219 * TaskStageType.IN_PROCESS,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task D"
                            ).stage = TaskStageType.REVIEW,
                            219 * TaskStageType.REVIEW,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task D"
                            ).stage = TaskStageType.COMPLETED,
                            219 * TaskStageType.COMPLETED,
                            0
                        )
                    Y: =70
                    ZIndex: =20

                TeamTkDSP As label:
                    Align: =Align.Center
                    BorderThickness: =1
                    Color: =RGBA(255, 255, 255, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =22
                    Text: |-
                        =LookUp(
                            Filter(Tasks, team = ThisItem.id),
                            name = "Task D"
                        ).SP
                    Width: =46
                    X: |-
                        =161
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task D"
                            ).stage = TaskStageType.TODO,
                            219 * TaskStageType.TODO,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task D"
                            ).stage = TaskStageType.IN_PROCESS,
                            219 * TaskStageType.IN_PROCESS,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task D"
                            ).stage = TaskStageType.REVIEW,
                            219 * TaskStageType.REVIEW,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task D"
                            ).stage = TaskStageType.COMPLETED,
                            219 * TaskStageType.COMPLETED,
                            0
                        )
                    Y: =70
                    ZIndex: =21

                TeamTkDDescription As label:
                    Align: =Align.Center
                    BorderThickness: =1
                    Color: =RGBA(255, 255, 255, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =34
                    Text: |-
                        =LookUp(
                            Filter(Tasks, team = ThisItem.id),
                            name = "Task D"
                        ).name
                    Width: =92
                    X: |-
                        =115
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task D"
                            ).stage = TaskStageType.TODO,
                            219 * TaskStageType.TODO,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task D"
                            ).stage = TaskStageType.IN_PROCESS,
                            219 * TaskStageType.IN_PROCESS,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task D"
                            ).stage = TaskStageType.REVIEW,
                            219 * TaskStageType.REVIEW,
                            0
                        )
                        + If(
                            LookUp(
                                Filter(
                                    Tasks,
                                    team = ThisItem.id
                                ),
                                name = "Task D"
                            ).stage = TaskStageType.COMPLETED,
                            219 * TaskStageType.COMPLETED,
                            0
                        )
                    Y: =92
                    ZIndex: =22

                VDivider2 As rectangle:
                    Height: =Parent.TemplateHeight - HDivider.Height
                    OnSelect: =Select(Parent)
                    Width: =4
                    X: =1097
                    ZIndex: =23

    Button1 As button:
        Fill: =RGBA(141, 198, 63, 1)
        OnSelect: |-
            =UpdateContext({
                popUpPlanningEnable: false
            })
        Text: ="Continue"
        Visible: =popUpPlanningEnable
        X: =598
        Y: =601
        ZIndex: =28

    Separator3 As rectangle:
        Height: =8
        Visible: =popUpDailyEnable
        Width: =460
        X: =453
        Y: =385
        ZIndex: =29

    PopUpDailyTaskDropDown As dropdown:
        Items: |-
            =Filter(
                Tasks,
                And(
                    team=LookUp(
                        Players,
                        id = currentTurn
                    ).id,
                    Or(
                        stage=TaskStageType.IN_PROCESS,
                        stage=TaskStageType.REVIEW
                    )
                )
            )
        Visible: =popUpDailyEnable
        Width: =176
        X: =593
        Y: =253
        ZIndex: =30

    PopUpDailyPlayerName As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        FontWeight: =FontWeight.Bold
        Text: |-
            =LookUp(
                Players,
                id = currentTurn
            ).name
        Visible: =popUpDailyEnable
        X: =606
        Y: =203
        ZIndex: =31

    PopUpDailyChooseCardTitle As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        FontWeight: =FontWeight.Bold
        Height: =54
        Text: ="CHOOSE A DAILY CARD"
        Visible: =popUpDailyEnable
        Width: =272
        X: =545
        Y: =407
        ZIndex: =32

    PopUpDailyGetCardButton As button:
        Fill: |-
            =If(
                PopUpDailyTaskDropDown.SelectedText.'data-ADB4D7A662F548B49FAC2B986E348A1Bstage' = TaskStageType.IN_PROCESS,
                RGBA(0, 134, 208, 1),
                If(
                    PopUpDailyTaskDropDown.SelectedText.'data-ADB4D7A662F548B49FAC2B986E348A1Bstage' = TaskStageType.REVIEW,
                    RGBA(127, 178, 57, 1)
                )
            )
        Height: =181
        OnSelect: |-
            =If(
                // Task in process
                PopUpDailyTaskDropDown.SelectedText.'data-ADB4D7A662F548B49FAC2B986E348A1Bstage' = TaskStageType.IN_PROCESS,
                UpdateContext({
                    currentCard: First(Shuffle(DailyNormalCards))
                });
                
                If(currentCard.type = EventResultType.INCREMENT,
                    Update(
                        Tasks,
                        {
                            team: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).team,
                            name: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).name,
                            SP: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).SP,
                            counter: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).counter,
                            stage: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).stage
                        },
                        {
                            team: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).team,
                            name: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).name,
                            SP: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).SP,
                            counter: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).counter + 1,
                            stage: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).stage
                        }
                    )
                );
                
                If(currentCard.type = EventResultType.DECREMENT,
                    Update(
                        Tasks,
                        {
                            team: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).team,
                            name: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).name,
                            SP: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).SP,
                            counter: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).counter,
                            stage: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).stage
                        },
                        {
                            team: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).team,
                            name: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).name,
                            SP: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).SP,
                            counter: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).counter - 1,
                            stage: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).stage
                        }
                    )
                );
            
                UpdateContext({
                    popUpEnable: true,
                    popUpTitle: "DAILY CARD RESPONSE",
                    popUpMessage: currentCard.content
                }),
                If(
                    PopUpDailyTaskDropDown.SelectedText.'data-ADB4D7A662F548B49FAC2B986E348A1Bstage' = TaskStageType.REVIEW,
                    UpdateContext({
                        currentCard: First(Shuffle(DailyNormalCards))
                    });
                    UpdateContext({
                        popUpEnable: true,
                        popUpTitle: "DAILY REVISION CARD RESPONSE",
                        popUpMessage: currentCard.content
                    })
                )
            )
        Text: |-
            =If(
                PopUpDailyTaskDropDown.SelectedText.'data-ADB4D7A662F548B49FAC2B986E348A1Bstage' = TaskStageType.IN_PROCESS,
                "GET A DAILY CARD",
                If(
                    PopUpDailyTaskDropDown.SelectedText.'data-ADB4D7A662F548B49FAC2B986E348A1Bstage' = TaskStageType.REVIEW,
                    "GET A DAILY REVISION CARD"
                )
            )
        Visible: =popUpDailyEnable
        Width: =176
        X: =593
        Y: =460
        ZIndex: =33

    PopUpDailyToDoInProcessGroup As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =35

        PopUpDailyToDoInProcessAllArea As rectangle:
            Fill: =RGBA(0, 0, 0, 0.43)
            Height: =680
            Visible: =popUpDailyToDo2InProcessEnable
            Width: =1366
            Y: =88
            ZIndex: =22

        PopUpDailyToDoInProcessContentArea As rectangle:
            Height: =570
            Visible: =popUpDailyToDo2InProcessEnable
            Width: =469
            X: =468
            Y: =127
            ZIndex: =23

        PopUpDailyToDoInProcessCloseIcon As icon.Cancel:
            Color: =RGBA(255, 255, 255, 1)
            Height: =50
            Icon: =Icon.Cancel
            OnSelect: |-
                =UpdateContext({
                    popUpDailyToDo2InProcessEnable: false
                })
            Visible: =popUpDailyToDo2InProcessEnable
            Width: =50
            X: =887
            Y: =128
            ZIndex: =24

        PopUpDailyToDoInProcessTitle As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            FontWeight: =FontWeight.Bold
            Height: =74
            Text: ="Please move tasks from TODO to IN PROCESS if needed"
            Visible: =popUpDailyToDo2InProcessEnable
            Width: =295
            X: =560
            Y: =148
            ZIndex: =25

        "PopUpDailyToDoInProcessTasksGallery As gallery.'BrowseLayout_Vertical_TwoTextOneImageVariant_ver5.0'":
            DelayItemLoading: =true
            Height: =435
            Items: =GamePlayers
            Layout: =Layout.Vertical
            LoadingSpinner: =LoadingSpinner.Data
            TemplatePadding: =0
            TemplateSize: =175
            Visible: =popUpDailyToDo2InProcessEnable
            Width: =405
            X: =505
            Y: =222
            ZIndex: =26

            DailyTodoInProcessPlayerName As label:
                Align: =Align.Center
                Color: =RGBA(255, 255, 255, 1)
                FontWeight: =FontWeight.Bold
                Height: =35
                OnSelect: =Select(Parent)
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Text: =ThisItem.name
                VerticalAlign: =VerticalAlign.Top
                Width: =110
                X: =31
                Y: =36
                ZIndex: =2

            Separator2_1 As rectangle:
                Height: =8
                OnSelect: =Select(Parent)
                Width: =Parent.TemplateWidth
                Y: =Parent.TemplateHeight - Self.Height
                ZIndex: =5

            TasksToDoDropdown As dropdown:
                Default: ="Select an option"
                Height: =50
                Items: |-
                    =Filter(
                        Tasks,team = ThisItem.id && stage = TaskStageType.TODO
                    )
                OnChange: =
                OnSelect: =Select(Parent)
                Width: =110
                X: =31
                Y: =71
                ZIndex: =6

            PopUpDailyToDoInProcessTasksInProcessGallery As gallery.galleryVertical:
                DelayItemLoading: =true
                Height: =117
                Items: |-
                    =Filter(
                        Tasks,team = ThisItem.id && stage = TaskStageType.IN_PROCESS
                    )
                Layout: =Layout.Vertical
                LoadingSpinner: =LoadingSpinner.Data
                TemplateSize: =28
                Width: =180
                X: =225
                Y: =50
                ZIndex: =7

                InProcessTasksName As label:
                    Height: =28
                    OnSelect: =Select(Parent)
                    Text: =ThisItem.name
                    X: =10
                    ZIndex: =1

            MoveToDo2InProcessButton As button:
                Fill: =RGBA(54, 176, 75, 1)
                OnSelect: |-
                    =Update(
                        Tasks,
                        {
                            team: TasksToDoDropdown.SelectedText.'data-ADB4D7A662F548B49FAC2B986E348A1Bteam',
                            name: TasksToDoDropdown.SelectedText.'data-ADB4D7A662F548B49FAC2B986E348A1Bname',
                            SP: TasksToDoDropdown.SelectedText.'data-ADB4D7A662F548B49FAC2B986E348A1BSP',
                            counter: TasksToDoDropdown.SelectedText.'data-ADB4D7A662F548B49FAC2B986E348A1Bcounter',
                            stage: TasksToDoDropdown.SelectedText.'data-ADB4D7A662F548B49FAC2B986E348A1Bstage'
                        },
                        {
                            team: TasksToDoDropdown.SelectedText.'data-ADB4D7A662F548B49FAC2B986E348A1Bteam',
                            name: TasksToDoDropdown.SelectedText.'data-ADB4D7A662F548B49FAC2B986E348A1Bname',
                            SP: TasksToDoDropdown.SelectedText.'data-ADB4D7A662F548B49FAC2B986E348A1BSP',
                            counter: TasksToDoDropdown.SelectedText.'data-ADB4D7A662F548B49FAC2B986E348A1Bcounter',
                            stage: TaskStageType.IN_PROCESS
                        }
                    );
                Text: ="Move"
                Width: =74
                X: =151
                Y: =76
                ZIndex: =8

            DailyTodoInProcessTitleInProcess As label:
                Align: =Align.Center
                Color: =RGBA(255, 255, 255, 1)
                FontWeight: =FontWeight.Bold
                Height: =35
                OnSelect: =Select(Parent)
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Text: ="IN PROGRESS"
                Width: =180
                X: =225
                Y: =10
                ZIndex: =9

        PopUpDailyToDoInProcessContinueButton As button:
            DisplayMode: |-
                =If(
                    CountRows(
                    GroupBy(
                        Filter(Tasks, stage = TaskStageType.IN_PROCESS),"team","data"
                    )
                ) >= totalPlayers,
                    DisplayMode.Edit,
                    DisplayMode.Disabled
                )
            Fill: =RGBA(54, 176, 75, 1)
            OnSelect: |-
                =UpdateContext({
                    popUpDailyToDo2InProcessEnable: false
                })
            Text: ="Continue"
            Visible: =popUpDailyToDo2InProcessEnable
            X: =622
            Y: =617
            ZIndex: =27

    Button3 As button:
        Fill: =RGBA(141, 198, 63, 1)
        OnSelect: |
            =If (
                // In Review and counter >= SP
                And(
                    LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).stage = TaskStageType.IN_PROCESS,    
                    LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).counter >= LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).SP
                ),
                // move to review
                Update(
                    Tasks,
                    {
                        team: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).team,
                        name: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).name,
                        SP: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).SP,
                        counter: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).counter,
                        stage: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).stage
                    },
                    {
                        team: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).team,
                        name: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).name,
                        SP: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).SP,
                        counter: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).counter,
                        stage: TaskStageType.REVIEW
                    }
                ),
                // increment the counter
                Update(
                    Tasks,
                    {
                        team: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).team,
                        name: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).name,
                        SP: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).SP,
                        counter: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).counter,
                        stage: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).stage
                    },
                    {
                        team: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).team,
                        name: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).name,
                        SP: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).SP,
                        counter: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).counter + 1,
                        stage: LookUp(Tasks, team=currentTurn && name=PopUpDailyTaskDropDown.SelectedText.Value).stage
                    }
                )
            );
        Text: ="Confirm"
        Visible: =popUpDailyEnable
        X: =593
        Y: =319
        ZIndex: =39

    PopUpGroup As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =45

        PopUpAllArea As rectangle:
            Fill: =RGBA(0, 0, 0, 0.43)
            Height: =680
            Visible: =popUpEnable
            Width: =1366
            Y: =88
            ZIndex: =40

        PopUpContentArea As rectangle:
            Height: =312
            Visible: =popUpEnable
            Width: =469
            X: =448
            Y: =272
            ZIndex: =41

        PopUpTitleLabel As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(56, 96, 178, 1)
            FontWeight: =FontWeight.Bold
            Height: =71
            Text: =popUpTitle
            Visible: =popUpEnable
            Width: =469
            X: =448
            Y: =272
            ZIndex: =42

        PopUpMessageLabel As label:
            Align: =Align.Center
            Fill: =RGBA(255, 255, 255, 1)
            FontWeight: =FontWeight.Bold
            Height: =241
            Text: =popUpMessage
            Visible: =popUpEnable
            Width: =469
            X: =448
            Y: =343
            ZIndex: =43

        PopUpCloseIcon As icon.Cancel:
            Color: =RGBA(255, 255, 255, 1)
            Height: =50
            Icon: =Icon.Cancel
            OnSelect: |-
                =UpdateContext({
                    popUpEnable: false,
                    popUpTitle: "",
                    popUpMessage: ""
                })
            Visible: =popUpEnable
            Width: =50
            X: =855
            Y: =282
            ZIndex: =44

    PopUpDailyGroup As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =47

        PopUpDailyAllArea As rectangle:
            Fill: =RGBA(0, 0, 0, 0.43)
            Height: =680
            Tooltip: ="hola"
            Visible: =popUpDailyEnable
            Width: =1366
            Y: =88
            ZIndex: =7

        PopUpDailyContentArea As rectangle:
            Height: =570
            Tooltip: ="hola"
            Visible: =popUpDailyEnable
            Width: =469
            X: =448
            Y: =107
            ZIndex: =8

        PopUpDailyCloseIcon As icon.Cancel:
            Color: =RGBA(255, 255, 255, 1)
            Height: =50
            Icon: =Icon.Cancel
            OnSelect: |-
                =UpdateContext({
                    popUpDailyEnable: false
                })
            Tooltip: ="hola"
            Visible: =popUpDailyEnable
            Width: =50
            X: =855
            Y: =107
            ZIndex: =9

        PopUpDailyTitle As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            FontWeight: =FontWeight.Bold
            Height: =54
            Text: =Upper("Select the task to be developed in this daily.")
            Tooltip: ="hola"
            Visible: =popUpDailyEnable
            Width: =272
            X: =547
            Y: =128
            ZIndex: =10

    PopUpPlanningGroup As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =58

        PopUpPlanningAllArea As rectangle:
            Fill: =RGBA(0, 0, 0, 0.43)
            Height: =680
            Visible: =popUpPlanningEnable
            Width: =1366
            Y: =88
            ZIndex: =16

        PopUpPlanningContentArea As rectangle:
            Height: =570
            Visible: =popUpPlanningEnable
            Width: =469
            X: =448
            Y: =107
            ZIndex: =17

        PopUpPlanningTitleLabel As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(56, 96, 178, 1)
            FontWeight: =FontWeight.Bold
            Height: =71
            Text: =popUpTitle
            Visible: =popUpPlanningEnable
            Width: =469
            X: =448
            Y: =272
            ZIndex: =18

        PopUpPlanningCloseIcon As icon.Cancel:
            Color: =RGBA(255, 255, 255, 1)
            Height: =50
            Icon: =Icon.Cancel
            OnSelect: |-
                =UpdateContext({
                    popUpPlanningEnable: false
                })
            Visible: =popUpPlanningEnable
            Width: =50
            X: =855
            Y: =107
            ZIndex: =19

        "PopUpPlanningTasksGallery As gallery.'BrowseLayout_Vertical_TwoTextOneImageVariant_ver5.0'":
            DelayItemLoading: =true
            Height: =419
            Items: |-
                =Filter(
                    Tasks,
                    team = currentTurn && stage = TaskStageType.BACKLOG
                )
            Layout: =Layout.Vertical
            LoadingSpinner: =LoadingSpinner.Data
            TemplatePadding: =0
            TemplateSize: =104
            Visible: =popUpPlanningEnable
            Width: =380
            X: =492
            Y: =182
            ZIndex: =20

            Rectangle8 As rectangle:
                Fill: =RGBA(255, 255, 255, 1)
                OnSelect: =Select(Parent)
                Width: =362
                X: =5
                ZIndex: =1

            Rectangle4 As rectangle:
                Fill: =RGBA(255, 255, 255, 1)
                Height: =87
                OnSelect: =Select(Parent)
                Width: =140
                X: =87
                Y: =8
                ZIndex: =2

            PlanningNameLabel As label:
                Align: =Align.Center
                BorderThickness: =2
                FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                Height: =56
                OnSelect: =Select(Parent)
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Text: =ThisItem.name
                Width: =140
                X: =87
                Y: =39
                ZIndex: =3

            PlanningCounterLabel As label:
                Align: =Align.Center
                BorderThickness: =2
                FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                Height: =31
                OnSelect: =Select(Parent)
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Text: =ThisItem.counter
                Width: =70
                X: =87
                Y: =8
                ZIndex: =4

            NextArrow2 As icon.ChevronRight:
                AccessibleLabel: =Self.Tooltip
                Color: =RGBA(141, 198, 63, 1)
                Height: =69
                Icon: =Icon.CheckBadge
                OnSelect: |-
                    =Update(
                        Tasks,
                        {
                            team: ThisItem.team,
                            name: ThisItem.name,
                            SP: ThisItem.SP,
                            counter: ThisItem.counter,
                            stage: ThisItem.stage
                        },
                        {
                            team: ThisItem.team,
                            name: ThisItem.name,
                            SP: ThisItem.SP,
                            counter: ThisItem.counter,
                            stage: TaskStageType.TODO
                        }
                    );
                PaddingBottom: =16
                PaddingLeft: =16
                PaddingRight: =16
                PaddingTop: =16
                Tooltip: ="View item details"
                Width: =62
                X: =305
                Y: =17
                ZIndex: =5

            PlanningSPLabel As label:
                Align: =Align.Center
                BorderThickness: =2
                FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                Height: =31
                OnSelect: =Select(Parent)
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Text: =ThisItem.SP
                Width: =70
                X: =157
                Y: =8
                ZIndex: =6

        PopUpPlanningTitle As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            FontWeight: =FontWeight.Bold
            Text: |-
                =Concatenate(
                    "Select your Tasks for this Sprint ",
                    LookUp(
                        GamePlayers,
                        id = currentTurn
                    ).name
                )
            Visible: =popUpPlanningEnable
            Width: =237
            X: =560
            Y: =128
            ZIndex: =21

